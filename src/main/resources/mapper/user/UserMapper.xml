<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pcwk.ehr.mapper.UserMapper">

  <resultMap type="UserVO" id="userMap">
    <id     column="user_id"          property="userId"/>
    <result column="user_name"        property="userName"/>
    <result column="user_pw"          property="userPw"/>
    <result column="user_tel"         property="userTel"/>
    <result column="user_email"       property="userEmail"/>
    <result column="nickname"         property="nickname"/>
    <result column="user_intro"       property="userIntro"/>
    <result column="last_rec_time"    property="lastRecTime"/>
    <result column="last_report_time" property="lastReportTime"/>
    <result column="admin_chk"        property="adminChk"/>
  </resultMap>

  <insert id="doSave" parameterType="UserVO">
    INSERT INTO users (
        user_id,
        user_name,
        user_pw,
        user_tel,
        user_email,
        nickname,
        user_intro,
        last_rec_time,
        last_report_time,
        admin_chk
    ) VALUES (
        #{userId},
        #{userName},
        #{userPw},
        #{userTel},
        #{userEmail},
        #{nickname},
        #{userIntro},
        SYSDATE,
        SYSDATE,
        #{adminChk}
    )
  </insert>

  <select id="doSelectOne" parameterType="UserVO" resultMap="userMap">
    SELECT * FROM users
    WHERE user_id = #{userId}
  </select>

  <update id="doUpdate" parameterType="UserVO">
    UPDATE users
    SET user_name   = #{userName},
        user_pw     = #{userPw},
        user_tel    = #{userTel},
        user_email  = #{userEmail},
        nickname    = #{nickname},
        user_intro  = #{userIntro},
        admin_chk   = #{adminChk}
    WHERE user_id   = #{userId}
  </update>

  <delete id="doDelete" parameterType="UserVO">
    DELETE FROM users
    WHERE user_id = #{userId}
  </delete>

  <delete id="deleteAll">
    DELETE FROM users
  </delete>

  <select id="getCount" resultType="int">
    SELECT COUNT(*) FROM users
  </select>

</mapper>